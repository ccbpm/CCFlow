<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>JS开发框架展示</title>
    <script src="../WF/Scripts/jquery-1.4.1.min.js" type="text/javascript"></script>
    <script src="../WF/Comm/Gener.js" type="text/javascript"></script>
    <script src="../WF/Scripts/config.js" type="text/javascript"></script>

    <script type="text/javascript">

        window.onload =

		function Test() {

		    var emps = new Entities("BP.Port.Emps", "FK_Dept", 1);
		    var html = "<ul>";
		    for (var i = 0; i < emps.length; i++) {
		        var emp = emps[i];
		        html += "<li>" + emp.Name + "</li>";
		    }
		    html += "</ul>";
		    alert(html);
		    return;

		    var count = DBAccess.RunSQL("UPDATE Port_Emp SET Name='福惠1' WHERE No='fuhui'");
		    alert(count);

		    var dataTable = DBAccess.RunSQLReturnTable("SELECT * FROM Port_Emp");
		    alert(JSON.stringify(dataTable));

		    // 创建一个空实体.
		    var emp = new Entity("BP.Port.Emp");
		    emp.No = "ranzun";
		    emp.Name = "冉尊";
		    emp.FK_Dept = "1";
		    emp.Insert(); //增加.

		    //更新.
		    emp.Name = "张三风";
		    emp.Update();

		    //删除.
		    emp.Delete();

		    //创建一个实体,获取实体的属性.
		    var emp = new Entity("BP.Port.Emp", "liyan");
		    var name = emp.Name;
		    var deptNo = emp.FK_Dept;  //部门编号
		    var deptName = emp.FK_DeptText; //部门名称.

		    // 创建一个空实体.
		    var emp = Entity("BP.Port.Emp");
		    emp.No = "zhangsan";
		    emp.Name = "张三";
		    emp.FK_Dept = "1";
		    emp.Insert(); //增加.
		    alert('Insert成功');

		    //更新.
		    emp.Name = "张三丰";
		    emp.Update();
		    alert('Update成功');

		    //删除.
		    emp.Delete();
		    alert('Delete成功');


		    //创建一个实体,获取实体的属性.
		    var emp = Entity("BP.Port.Emp", "liyan");
		    var name = emp.Name;
		    var deptNo = emp.FK_Dept;  //部门编号
		    var deptName = emp.FK_DeptText; //部门名称.

		    //执行实体的方法.
		    var result = emp.Do("ResetPass"); //重置密码:不带参数的方法.
		    alert(result);

		    var result1 = emp.Do("ChangePass", "&oldpass=456&pass1=123&pass2=123"); //修改密码:带参数的方法.
		    alert(result1);

		}

        function TestEns() {

            var emps = Entities("BP.Port.Emps", "FK_Dept", "1");
            var html = "<ul>";
            for (var i = 0; i < emps.length; i++) {
                var emp = emps[i];
                html += "<li>" + emp.Name + "</li>";
            }
            html += "</ul>";
            alert(html);

            //获得性别为女的学生.
            var students1 = Entities("BP.Demo.BPFramework.Students", "XB", "0");

            //获得性别为女的学生并且按年龄排序.
            var students2 = Entities("BP.Demo.BPFramework.Students", "XB", "0", "Age");

            //获得性别为女的,并且班级为01 的学生.
            var students3 = Entities("BP.Demo.BPFramework.Students", "XB", "0", "FK_BanJi","01");

            //获得性别为女的,并且班级为01 的学生, 按照年龄排序.
            var students3 = Entities("BP.Demo.BPFramework.Students", "XB", "0", "FK_BanJi", "01","Age");

        }

        //执行方法.(没有想明白)
        function ExecHttpHandlerMonthod_A() {

            //执行非静态的方法,有参数,仅仅传递指定的参数其他参数不处理.
            var handler = CreateHttpHandler("BP.WF.HttpHandler.WF_AppClassic");
            handler.AddUrlData();  //把url参数加入里面去.
            handler.AddFormData(); //把form数据加入里面去.

            //执行提交.
            var result = handler.Login_Submit();
            var result = handler.Do("Login_Submit");

            //处理结果.
            if (result.indexOf('err@') == 0) {
                alert(result); //登录失败.
                return;
            }
        }

        //执行方法.(没有想明白)
        function ExecHttpHandlerMonthod_B() {
             
            //执行非静态的方法,无参数.(系统就会把url与当前页面的form作为参数传递到后台去.)
            var result = Exce("BP.WF.HttpHandler.WF_AppClassic", "Login_Submit");

            //执行非静态的方法,有参数,仅仅传递指定的参数其他参数不处理.
            var result = Exce("BP.WF.HttpHandler.WF_AppClassic", "Login_Submit", "&UserNo=zhoupeng&Password=123");
            
            //处理结果.
            if (result.indexOf('err@') == 0) {
                alert(result); //登录失败.
                return;
            }
        }

        //直接访问数据库.
        function DBAccess11() {

            var sql = "UPDATE Port_Emp SET Name='张三' WHERE No='zhangsan' ";
            var result = DBAccess.RunSQL(sql);
            alert("一共[" + result + "] 条记录被更新");

            sql = "SELECT No,Name FROM Demo_Student WHERE XB='0' ";
            var dt = DBAccess.RunSQLReturnTable(sql);
            alert("一共[" + dt.lenght + "] 条记录被查询到");
        }
    </script>
     
</head>
<body>



</body>
</html>
