<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>流程字段列表</title>
    <script language="JavaScript" src="/WF/Comm/JScript.js" type="text/javascript" ></script>
    <script type="text/javascript" src="/WF/Scripts/bootstrap/js/jquery.min.js"></script>
    <script type="text/javascript" src="/WF/Scripts/bootstrap/js/bootstrap.min.js"></script>
    <script src="/WF/Scripts/QueryString.js" type="text/javascript"></script>
    <script src="/WF/Scripts/config.js" type="text/javascript"></script>
     <base target="_self" /> 
    <link href="/WF/Comm/Style/Table0.css" rel="stylesheet" type="text/css" />

    <script language="javascript" type="text/javascript" >
        /* ESC Key Down */
        function Esc() {
            if (event.keyCode == 27)
                window.close();
            return true;
        }

        //页面启动函数.
        $(function () {

            $("#Msg").html("正在加载,请稍后......");

            InitPage();

            $("#Msg").html("");
        });

        //初始化数据.
        function InitPage() {

           var fk_flow = GetQueryString("FK_Flow");

            //初始化表格.
           $.ajax({
               type: 'post',
               async: true,
               url: Handler + "?DoType=FlowFields_Init&FK_Flow=" + fk_flow + "&m=" + Math.random(),
               dataType: 'html',
               success: function (data) {

                   if (data.indexOf('err@') == 0) {
                       alert(data);
                       return;
                   }


                   data = JSON.parse(data);

                   //处理系统字段..
                   for (var i = 0; i < data.length; i++) {

                       var newRow = "";
                       var keyOfEn = data[i].KeyOfEn;
                       switch (keyOfEn) {
                           case "OID":
                           case "AtPara":
                           case "BillNo":
                           case "FID":
                           case "FK_Dept":
                           case "FK_NY":
                           case "FlowDaySpan":
                           case "FlowEmps":
                           case "FlowEnder":
                           case "FlowEnderRDT":
                           case "FlowEndNode":
                           case "FlowNote":
                           case "FlowStarter":
                           case "FlowStartRDT":
                           case "GuestName":
                           case "GuestNo":
                           case "GUID":
                           case "MyNum":
                           case "PEmp":
                           case "PFID":
                           case "PFlowNo":
                           case "PNodeID":
                           case "PrjName":
                           case "PrjNo":
                           case "PWorkID":
                           case "Title":
                           case "WFSta":
                           case "WFState":
                               break;
                           default:
                               continue;
                       }
                       newRow = "<tr ><td class=Idx>" + i + "</td>";
                       newRow += "<td>" + data[i].KeyOfEn + "</td>";
                       newRow += "<td>" + data[i].Name + "</td>";
                       newRow += "<td>" + data[i].MinLen + "</td>";
                       newRow += "<td>" + data[i].MaxLen + "</td>";
                       newRow += "<td>" + data[i].UIBindKey + "</td>";
                       newRow += "<td>";
                       newRow += "</tr>";
                       $("#Table1 tr:last").after(newRow);
                   }
               }
           });
        }
          
     </script>
</head>
<body onkeypress="Esc()" >


<table id="Table1">
<caption>流程系统字段</caption>
  <tr>
            <th>序</th>
            <th>字段名</th>
            <th>字段中文名称</th>
            <th>最小长度</th>
            <th>最大长度</th>
            <th>业务类型</th>
            <th>其他</th>
        </tr>
</table>


<table id="Table2">
<caption>普通字段</caption>
  <tr>
            <th>序</th>
            <th>字段名</th>
            <th>字段中文名称</th>
            <th>最小长度</th>
            <th>最大长度</th>
            <th>业务类型</th>
            <th>其他</th>
        </tr>
</table>


<table id="Table3">
<caption>枚举字段</caption>
  <tr>
            <th>序</th>
            <th>字段名</th>
            <th>字段中文名称</th>
            <th>最小长度</th>
            <th>最大长度</th>
            <th>业务类型</th>
            <th>其他</th>
        </tr>
</table>



<table id="Table4">
<caption>外键字段</caption>
  <tr>
            <th>序</th>
            <th>字段名</th>
            <th>字段中文名称</th>
            <th>最小长度</th>
            <th>最大长度</th>
            <th>业务类型</th>
            <th>其他</th>
        </tr>
</table>


<div id="Msg"></div>

</body>
</html>
