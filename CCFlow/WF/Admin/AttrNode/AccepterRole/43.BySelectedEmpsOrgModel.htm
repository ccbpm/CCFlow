
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <link href="../../../../DataUser/Style/ccbpm.css" rel="stylesheet" type="text/css" />
    <link href="../../../Scripts/easyUI145/themes/icon.css" rel="stylesheet" type="text/css" />
    <link href="../../../Scripts/easyUI145/themes/default/easyui.css" rel="stylesheet" type="text/css" />

    <script src="../../../Scripts/jquery-1.7.2.min.js" type="text/javascript"></script>
    <script src="../../../Scripts/easyUI/jquery.easyui.min.js" type="text/javascript"></script>
    <script src="../../../Scripts/QueryString.js" type="text/javascript"></script>
    <script type="text/javascript" src="../../../Scripts/config.js"></script>
    <script type="text/javascript" src="../../../Comm/Gener.js"></script>
    <script src="DDLBar.js" type="text/javascript"></script>
    <script src="../../CCFlowEnum.js" type="text/javascript"></script>
    <script src="../../../Scripts/EasyUIUtility.js" type="text/javascript"></script>
    <script src="../../../Scripts/vue.js" type="text/javascript"></script>
    <script src="../Admin.js"></script>
</head>
<body>
    <div id="App">
        <div id="bar"> </div>
        <form>
          
        </form>
    </div>
    <script type="text/javascript">
        var Baseinfo = new Vue({
            el: '#App',
            data: {
                deliverWay: DeliveryWay.BySelectedEmpsOrgModel,
                nodeId: GetQueryString("FK_Node"),
                isAutoLoadEmps: false,
                isSimpleSelector: false,
                isEnableDeptRange: false,
                isEnableStaRange: false,
                nodeExt: null
            },
            methods: {
                OpenDialog2019: function () {
                    var url = "../Selector/Default.htm";
                    var nodeID = GetQueryString("FK_Node");
                    url += '?NodeID=' + nodeID+ "&FK_Flow=" + GetQueryString("FK_Flow");
                    
                    window.location.href = url;
                },
                IsChange: function () {
                    if ($("#CB_IsSimpleSelector").attr("checked") != "checked") {
                        if (nodeExt.HuiQianRole == 4 && nodeExt.HuiQianLeaderRole == 0) {
                            this.isSimpleSelector = true;
                            alert("该节点会签模式为组长模式，只能单项选择");
                        }
                    }
                },
            },
            created() {
                InitBar(this.deliverWay);
                var node = new Entity("BP.WF.Template.Selector", this.nodeId);
                if (node.IsAutoLoadEmps == 1)
                    this.isAutoLoadEmps = true;
                if (node.IsSimpleSelector == 1)
                    this.isSimpleSelector = true;
                if (node.IsEnableDeptRange == 1)
                    this.isEnableDeptRange = true;
                if (node.IsEnableStaRange == 1)
                    this.isEnableStaRange = true;
                this.nodeExt = new Entity("BP.WF.Template.NodeExt", this.nodeId);
                if (this.nodeExt.HuiQianRole == 4 && this.nodeExt.HuiQianLeaderRole == 0) //组长模式
                    this.isSimpleSelector = false;
            }
        });
        function Save() {

            var node = new Entity("BP.WF.Node", Baseinfo.nodeId);
            node.DeliveryWay = Baseinfo.BySelectedEmpsOrgModel;
            node.Update();
            var node = new Entity("BP.WF.Template.Selector", Baseinfo.nodeId);
            node.CopyForm();  //按照规则把数据放入到entity.
            node.Update();
        }
    </script>
</body>
</html>
