<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8" />
    <title>发送后转向</title>
    <link href="../../../Scripts/easyUI145/themes/color.css" rel="stylesheet" />
    <link href="../../../Scripts/easyUI145/themes/default/easyui.css" rel="stylesheet" type="text/css" />
    <link href="../../../../DataUser/Style/ccbpm.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript" src="../../../Scripts/bootstrap/js/jquery.min.js"></script>
    <script src="../../../Scripts/QueryString.js" type="text/javascript"></script>
    <link href="../../../../DataUser/Style/ccbpm.css" rel="stylesheet" type="text/css" />
    <!-- 引用通用的js文件. -->
    <script type="text/javascript" src="../../../Scripts/config.js"></script>
    <script type="text/javascript" src="../../../Comm/Gener.js"></script>
    <script src="../../Admin.js"></script>
    <script src="DDLBar.js"></script>
    <script src="../../CCFlowEnum.js"></script>
    <script type="text/javascript" language="javascript">
        //页面启动函数.
        $(function () {

            $("#Msg").html("正在加载,请稍后......");
            InitBar(TurntoWay.TurntoClose);
            InitPage();

            $("#Msg").html("");
        });



        function Btn_Save_Click() {
            var frmData = $("#cc").serialize();


            var fk_node = GetQueryString("FK_Node");

            var node = new Entity("BP.WF.Node", fk_node);
            var turnToDeal = $("input[name='TurnToDeal']:checked").val();
            node.TurnToDeal = turnToDeal;

            if (node.TurnToDeal == 1) {
                $("#TB_SpecURL").val("");
                node.TurnToDealDoc = $("#TB_SpecMsg").val();
            }

            if (node.TurnToDeal == 2) {
                $("#TB_SpecMsg").val("");
                node.TurnToDealDoc = $("#TB_SpecURL").val();
            }

            if (node.TurnToDeal == 0 || node.TurnToDeal == 3) {
                $("#TB_SpecMsg").val("");
                $("#TB_SpecURL").val("");
            }

            if (node.TurnToDeal != 0 && node.TurnToDeal != 3) {
                if (node.TurnToDealDoc == '') {
                    alert('执行内容没有填写');
                    return;
                }
            }

            node.Update();

            window.location.href = window.location.href;

        }

        function rb_onchange(obj) {

            if (obj == 1) {

                document.getElementById("TB_SpecURL").readOnly = true;
                document.getElementById("TB_SpecMsg").readOnly = false;
            } else if (obj == 2) {

                document.getElementById("TB_SpecMsg").readOnly = true;
                document.getElementById("TB_SpecURL").readOnly = false;
            } else {
                document.getElementById("TB_SpecMsg").readOnly = true;
                document.getElementById("TB_SpecURL").readOnly = true;
            }
        }
    </script>
</head>
<body>
    <div id="bar">

    </div>
    <form id="cc">
        <!--<div id="bar" class="cs-tr cs-bar">
            <label style="float:left;font-size:15px;font-weight:bolder;padding-top:10px;">发送后转向</label>
            <input type="button" ID="Btn_Save" runat="server" value="保存" onclick="Btn_Save_Click()" />
        </div>-->
        <fieldset>
            <legend>
                <input type="radio" ID="RB_TurnToDeal_3" name="TurnToDeal" runat="server" value="3"
                       onClick="rb_onchange(3)" /><label for="RB_TurnToDeal_3"> 发送完毕就关闭，不提示任何信息。 </label>
            </legend>

            <ul style="color: Gray">
                <li>发送之后，不提示任何信息，直接关闭窗口。</li>
            </ul>
        </fieldset>

    </form>

</body>
</html>
