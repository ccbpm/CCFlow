<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>字段</title>
    <!--引入jquery-->
    <script src="../../Scripts/jquery-1.11.0.min.js"></script>
    <!--引入bootstrap-->
    <link href="../../Scripts/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
    <script src="../../Scripts/bootstrap/js/bootstrap.min.js"></script>

    <!--引入easyui-->
    <script src="../../Scripts/easyUI145/jquery.easyui.min.js"></script>
    <script src="../../Scripts/EasyUIUtility.js"></script>
    <link href="../../Scripts/easyUI145/themes/default/easyui.css" rel="stylesheet" />
    <link href="../../Scripts/easyUI145/themes/icon.css" rel="stylesheet" />

    <!--引入通用的JS-->
    <script src="../../Scripts/QueryString.js"></script>
    <script src="../../Scripts/config.js"></script>
    <script src="../../Comm/Gener.js"></script>
    <script src="../../Scripts/PinYin.js"></script>
    <script src="../../Scripts/vue.js"></script>
    <link href="../../../DataUser/Style/ccbpm.css" rel="stylesheet" />

</head>
<body>

    <table id="App" style="width:100%">
        <tr>
            <th>序</th>
            <th>字段</th>
            <th>英文名</th>
            <th>类型</th>
            <th>操作</th>
        </tr>

        <tr v-for="(value,index) in listData.data">
            <td>{{index+1}}</td>
            <td>{{value.KeyOfEn}}</td>
            <td>{{value.Name}}</td>
            <td> <a href="#" @click="Edit(value.MyPK);">编辑</a></td>
        </tr>

    </table>

    <script type="text/javascript">

        var handler = new HttpHandler("BP.WF.HttpHandler.WF_Admin_DevelopDesigner");
        handler.AddPara("FrmID", this.GetQueryString("FrmID"));
        var html = handler.DoMethodReturnString("Fields_Init");


        var Baseinfo = new Vue({
            el: '#App',
            data: {
                listData: [],
            },
            created() {
                var frmID = GetQueryString("FrmID");
                var ens = new Entities("BP.Sys.MapAttrs");
                ens.Retrieve("FK_MapData", frmID, "Idx");
                this.listData = ens.GetEns();
                // console.log(this.listData);
            },
            methods: {
                Edit: function (myPK) {
                    var url = "/WF/Comm/En.htm?EnName=BP.Sys.MapAttr&MyPK=" + myPK;
                    WinOpen(url);
                },
                Insert: function () {
                    var workid = GetQueryString("WorkID");
                    var url = "/WF/Comm/En.htm?EnName=BP.TGK.ND14Rpt&OID=" + workid;
                    WinOpen(url);
                }
            }

        })

    </script>


</body>
</html>