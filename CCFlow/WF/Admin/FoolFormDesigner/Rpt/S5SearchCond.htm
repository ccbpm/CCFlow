<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>查询条件</title>
    <link href="../../../Comm/Style/CommStyle.css" rel="stylesheet" type="text/css" />
    <link href="../../../Comm/Style/Table0.css" rel="stylesheet" type="text/css" />
    <link href="../../../Scripts/easyUI/themes/default/easyui.css" rel="stylesheet" type="text/css" />
    <link href="../../../Scripts/easyUI/themes/icon.css" rel="stylesheet" type="text/css" />
    <script src="../../../Scripts/easyUI/jquery-1.8.0.min.js" type="text/javascript"></script>
    <script src="../../../Scripts/easyUI/jquery.easyui.min.js" type="text/javascript"></script>
    <script src="../../../Scripts/config.js" type="text/javascript"></script>
    <script src="../../../Scripts/QueryString.js" type="text/javascript"></script>
    <script language="javascript" type="text/javascript" >

        //页面启动函数.
        $(function () {

            $("#Msg").html("<img src=../../../Img/loading.gif />&nbsp;正在加载,请稍后......");

            InitPage();

            $("#Msg").html("");

        });

        function InitPage() {

            var rptNo = unescape(GetQueryString("RptNo"));
            var flowNo = unescape(GetQueryString("FK_Flow"));

            $.ajax({
                type: 'post',
                async: true,
                url: Handler + "?DoType=S5SearchCond_Init&RptNo=" + rptNo + "&FK_Flow=" + flowNo + "&m=" + Math.random(),
                dataType: 'html',
                success: function (data) {

                    if (data.indexOf("@") == 0) {
                        alert(data);
                        return;
                    }

                    var jsData = JSON.parse(data);
                    var Sys_MapAttr = jsData["Sys_MapAttr"]; //所有的列.

                    //输出列.
                   
                }
            });
        }

        function Save() {

            var fk_flow = GetQueryString("FK_Flow");
            var rptNo = GetQueryString("RptNo");

            $.ajax({
                type: 'post',
                async: true,
                url: Handler + "?DoType=S5SearchCond_Save&FK_Flow=" + fk_flow + "&RptNo=" + rptNo + "&m=" + Math.random(),
                dataType: 'html',
                success: function (data) {
                    alert(data)
                }
            });
        }

    </script>
    <base target="_self" /> 
</head>

<body class="easyui-layout">
    <form id="form1" method="post">
    <div data-options="region:'center',title:'4. 设置报表查询条件',border:false" style="padding:5px;height:auto">
        
        <div style='width: 100%'>
            <div class='easyui-panel' title='是否增加关键字查询' data-options="iconCls:'icon-tip',fit:true"
                style='height: auto; padding: 10px'>
                关键字查询是接受用户输入一个关键字，在整个报表的显示列中使用like查询(外键、枚举、数值类型的除外)<br>
                <input id="ContentPlaceHolder1_Pub2_CB_IsSearchKey" type="checkbox" name="ctl00$ContentPlaceHolder1$Pub2$CB_IsSearchKey"
                    checked="checked" /><label for="ContentPlaceHolder1_Pub2_CB_IsSearchKey">是否增加关键字查询</label></div>
        </div>
        <br>
        <div style='width: 100%'>
            <div class='easyui-panel' title='外键与枚举类型' data-options="iconCls:'icon-tip',fit:true"
                style='height: auto; padding: 10px'>
                外键、枚举类型的数据可以添加到查询条件中，请选择要添加的查询条件：<br>
                <input id="ContentPlaceHolder1_Pub2_CB_F_WFSta" type="checkbox" name="ctl00$ContentPlaceHolder1$Pub2$CB_F_WFSta"
                    checked="checked" /><label for="ContentPlaceHolder1_Pub2_CB_F_WFSta">状态(WFSta)</label><br>
                <input id="ContentPlaceHolder1_Pub2_CB_F_FK_Dept" type="checkbox" name="ctl00$ContentPlaceHolder1$Pub2$CB_F_FK_Dept" /><label
                    for="ContentPlaceHolder1_Pub2_CB_F_FK_Dept">隶属部门(FK_Dept)</label><br>
            </div>
        </div>
        <br>
        
        <div style='width: 100%'>
            <div class='easyui-panel' title='时间段' data-options="iconCls:'icon-tip',fit:true"
                style='height: auto; padding: 10px'>
                对数据按照时间段进行查询，比如：按流程的发起时间，在指定的时间段内进行查询。<br>
                选择方式:<select id="DDLType" name="DDLType"></select>
                字段:<select id="DDLFields" name="DDLFields"></select></br>
            </div>
        </div>
    <br />

    <a id="Btn_Save" class="easyui-linkbutton" data-options="iconCls:&#39;icon-save&#39;" href="Save()">保存</a>

    </div>
    </form>
</body>
</html>
