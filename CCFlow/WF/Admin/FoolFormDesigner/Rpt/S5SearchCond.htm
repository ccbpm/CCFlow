<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>查询条件</title>
     <script type="text/javascript" src="../../../Scripts/jquery-1.7.2.min.js"></script>
    <script type="text/javascript" src="../../../Scripts/QueryString2016.js"></script>
    <link href="../../../../DataUser/Style/ccbpm.css" rel="stylesheet" />
    <script src="../../../Scripts/config.js" type="text/javascript"></script>
    <script language="javascript" type="text/javascript" >

        //页面启动函数.
        $(function () {

            $("#Msg").html("<img src=../../../Img/loading.gif />&nbsp;正在加载,请稍后......");

            InitPage();

            $("#Msg").html("");

        });

        function InitPage() {

            var rptNo = unescape(GetQueryString("RptNo"));
            var flowNo = unescape(GetQueryString("FK_Flow"));

            $.ajax({
                type: 'post',
                async: true,
                url: Handler + "?DoType=S5SearchCond_Init&RptNo=" + rptNo + "&FK_Flow=" + flowNo + "&m=" + Math.random(),
                dataType: 'html',
                success: function (data) {

                    if (data.indexOf("@") == 0) {
                        alert(data);
                        return;
                    }

                    var jsData = JSON.parse(data);
                    var Sys_MapAttr = jsData["Sys_MapAttr"]; //所有的列.

                    //输出列.
                   
                }
            });
        }

        function Save() {

            var fk_flow = GetQueryString("FK_Flow");
            var rptNo = GetQueryString("RptNo");

            $.ajax({
                type: 'post',
                async: true,
                url: Handler + "?DoType=S5SearchCond_Save&FK_Flow=" + fk_flow + "&RptNo=" + rptNo + "&m=" + Math.random(),
                dataType: 'html',
                success: function (data) {
                    alert(data)
                }
            });
        }

        function Cancel() {
            window.close();
        }
    </script>
    <base target="_self" /> 
</head>
<body onkeypress="Esc()" >

<form name='cc' id='cc'>

  <table class='Table' cellpadding='0' cellspacing='0' style='width: 60%;'>
  <caption>查询条件</caption>

      <!----------------------  关键字 ------------------------>
      <tr>
         <th>是否增加关键字查询:关键字查询是接受用户输入一个关键字，在整个报表的显示列中使用like查询(外键、枚举、数值类型的除外)  </th>
      </tr>
      <tr>
        <td style="width:30%;" >
           <input type="checkbox" value="0" id="CB_Key" name="CB_Key" /><label for="CB_Key" >启用关键字查询</label>
            </td>
      </tr>

      <!----------------------  查询条件 ------------------------>
      <tr>
         <th>外键与枚举类型查询：外键、枚举类型的数据可以添加到查询条件中，请选择要添加的查询条件 </th>
      </tr>
      <tr>
        <td  >
             <div id="FKeys" />
            </td>
      </tr>

      <!----------------------  增加时间点 ------------------------>
       <tr>
         <th>时间段查询：对数据按照时间段进行查询，比如：按流程的发起时间，在指定时间段内进行查询。 </th>
      </tr>
      <tr>
       <td> 
       选择方式：<select  name="ByWay"  id="ByWay"> 
       <option value="0">不设置</option>
       <option value="1"> 按日期</option>
       <option value="2">按日期时间</option>
       </select> 
       选择字段：<select  name="DDL_FieldDT"  id="DDL_FieldDT"></select> 
       </td>
      </tr>
    </table>

    <input type="button" id="Btn_Save" name="Btn_Save" value="保存" onclick="Save()" />

</form>

</body>
</html>
