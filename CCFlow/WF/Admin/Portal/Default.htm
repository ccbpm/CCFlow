<!DOCTYPE>
<html>
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>驰骋工作流程引擎设计器-专业版</title>
    <link href="../../Scripts/easyUI145/themes/default/easyui.css" rel="stylesheet" type="text/css" />
    <link href="../../Scripts/easyUI145/themes/default/dialog.css" rel="stylesheet" type="text/css" />
    <link href="../../Scripts/easyUI145/themes/icon.css" rel="stylesheet" type="text/css" />
    <link href="../CCFormDesigner/normalize/css/ns-default.css" rel="stylesheet" type="text/css" />
    <link href="../CCFormDesigner/normalize/css/ns-style-bar.css" rel="stylesheet" type="text/css" />   
    <link href="../../Style/skin/adminfont/iconfont.css" rel="stylesheet" />    
    <link href="../../Style/skin/css/Default.css" rel="stylesheet" />
    
</head>
<body class="easyui-layout default-skin" data-options="fit: true">
    <div id="ShowMsg" class="panel window mymask mymaskContainer" style="display: none;
        width: 160px; height: 32px; z-index: 21008; text-align: center; font-size: 14px;
        font-weight: bold;">
        <img alt="" src="Img/loading_small.gif" align='middle' style="width: 32px; height: 32px;" />
        请稍后...
    </div>

    <div class="window-mask mymask" style="width: 100%; height: 100%; display: block; z-index: 21006;">
    </div>
    <div data-options="region:'west',border:true,split:true,collapsible:false" title="驰骋BPM" style="width: 270px;">
        <div id="menuTab" class="easyui-tabs tab-menu" data-options="fit:true,border:false">
        </div>
    </div>
    <div data-options="region:'center',border:true" collapsible="true">

        <div id="tabs" class="easyui-tabs default-header" fit="true" border="false" data-options="tools:'#tab-tools',onBeforeClose:EventListener_TabClose,onClose:EventListener_TabCloseed">

            <ul id="rightUL" class="nav">
                <li class="drop-down user-menu">   
                    <i class="iconfont icon-guanliyuan"></i>
                    <span id="UserName" href="#"></span>
                    <ul style="list-style:none;" class="drop-down-content">
                        <!--<li><a id="OrgNo" href="#">组织编号：</a></li>
                        <li><a id="OrgName" href="#">组织名称：</a></li>-->
                        <li><a id="org" href="/WF/Admin/Portal/SelectOneOrg.htm"><i class="iconfont icon-xiancheng2"></i>切换组织</a></li>
                        <li><a href="#" id="Login2App" data-options="plain:true" onclick="Login2App()"><i class="iconfont icon-home-copy"></i>登陆前台</a></li>
                        <li><a href="#" onclick="addTab('', '个人中心', '../../Setting/Default.htm', '')"><i class="iconfont icon-guanli"></i>个人中心</a></li>
                        <li><a href="#" onclick="LoginOut()"><i class="iconfont icon-tuichu"></i>退出登录</a></li>
                        <li><a target="_blank" href="http://ccflow.org"><i class="iconfont icon-guanyu"></i>关于</a></li>

                    </ul>

                </li>

            </ul>
        </div>

    </div>
    <!--  context menu -->
    <div id="mFlowRoot" class="easyui-menu" style="width: 120px;">
        <div onclick="newFlow()" data-options="iconCls:'icon-add'">
            新建流程
        </div>
        <div class="menu-sep">
        </div>
        <div onclick="SearchFlow()" data-options="iconCls:'icon-Search'">
            按关键字查询流程
        </div>
        <div class="menu-sep">
        </div>
        <div onclick="newFlowSort(true)" data-options="iconCls:'icon-tree_folder'">
            新建子级类别
        </div>
        <div onclick="editFlowSort()" data-options="iconCls:'icon-edit'">
            编辑
        </div>
        <div class="menu-sep">
        </div>
        <div onclick="RefreshNode('flowTree', 'F99')" data-options="iconCls:'icon-reload'">
            刷新
        </div>
    </div>
    <img src="../../Scripts/easyUI145/themes/icons/open.png" />
    <div id="mFlowSort" class="easyui-menu" style="width: 120px;">
        <div onclick="newFlow()">

            <i class="iconfont icon-xinjianliucheng"></i>新建流程
        </div>

        <div onclick="ImpFlowBySort()">
            <i class="iconfont icon-daochu"></i>导入流程模板
        </div>
        <div class="menu-sep">
        </div>
        <div onclick="newFlowSort(false)">
            <i class="iconfont icon-xinjianleibie"></i>新建同级类别
        </div>
        <div onclick="newFlowSort(true)">
            <i class="iconfont icon-xinjian1"></i>新建子级类别
        </div>
        <div onclick="editFlowSort()">
            <i class="iconfont icon-bianji"></i>编辑
        </div>
        <div class="menu-sep">
        </div>
        <div onclick="deleteFlowSort()">
            <i class="iconfont icon-guanbi"></i>删除
        </div>
        <div class="menu-sep">
        </div>
        <div onclick="moveUpFlowSort()">
            <i class="iconfont icon-shangyi"></i>上移
        </div>
        <div onclick="moveDownFlowSort()">
            <i class="iconfont icon-xy"></i>下移
        </div>
        <div class="menu-sep">
        </div>
        <div onclick="RefreshNode('flowTree', 'F99')">
            <i class="iconfont icon-refresh"></i>刷新
        </div>
        <div onclick="viewFlowSort()">
            <i class="iconfont icon-shuxing"></i>树节点属性
        </div>
    </div>
    <div id="mFlow" class="easyui-menu" style="width: 120px;">
        <div onclick="showFlow()">
            <i class="iconfont icon-jiedian"></i>设计流程图
        </div>
        <!--<div onclick="RefreshFlowJson()" data-options="iconCls:'icon-reset'">重置流程图</div>-->
        <!--<div class="menu-sep">
        </div>-->
        <div onclick="ImpFlow()">
            <i class="iconfont icon-daoru"></i>导入流程模板
        </div>
        <div onclick="ExpFlow()">
            <i class="iconfont icon-daochu"></i>导出流程模板
        </div>
        <div class="menu-sep">
        </div>
        <div onclick="DeleteFlow()">
            <i class="iconfont icon-guanbi"></i>删除流程
        </div>
        <div onclick="FlowProperty()">
            <i class="iconfont icon-shuxing"></i>流程属性
        </div>
        <div class="menu-sep">
        </div>
        <div onclick="moveUpFlow()">
            <i class="iconfont icon-shangyi"></i>上移
        </div>
        <div onclick="moveDownFlow()">
            <i class="iconfont icon-xy"></i>下移
        </div>
    </div>
    <!--  <div onclick="ImpLocalFlow()" data-options="iconCls:'icon-imp'">导入本机流程模版</div>
        <div onclick="ImpColudFlow()" data-options="iconCls:'icon-imp'">导入ccbpm云服务流程模版</div>-->
    </div>
    <div id="mFormRoot" class="easyui-menu" style="width: 120px;">
        <!--<div onclick="newSrc()" data-options="iconCls:'icon-add'">新建数据源</div>-->
        <div onclick="RefreshNode('formTree', '1')" data-options="iconCls:'icon-reload'">
            刷新
        </div>
    </div>
    <div id="mFormSrc" class="easyui-menu" style="width: 120px;">
        <div onclick="newCCFormSort(true)" data-options="iconCls:'icon-add'">
            新建下级目录
        </div>
        <!-- <div onclick="newFrm()" data-options="iconCls:'icon-new'">
             新建表单</div>-->
        <!--<div onclick="newSrc()" data-options="iconCls:'icon-add'">新建数据源</div>-->
    </div>
    <div id="mFormSort" class="easyui-menu" style="width: 120px;">
        <!--<div onclick="newFrm(0)">
            <img src="../../Scripts/easyUI145/themes/icons/excel.gif">新建独立表单
        </div>
        <div onclick="newFrm(1)">
            <img src="../../Scripts/easyUI145/themes/icons/sheet.png">新建单据表单
        </div>
        <div onclick="newFrm(2)">
            <img src="../../Scripts/easyUI145/themes/icons/edit_add.png">新建实体表单
        </div>-->
        <div onclick="openFrm('../FoolFormDesigner/NewFrmGuide.htm')">
            <i class="iconfont icon-linshibiaoge"></i>新建表单
        </div>
        <div class="menu-sep">
        </div>
        <div onclick="newCCFormSort(false)">
            <i class="iconfont icon-xinjianleibie"></i>新建同级类别
        </div>
        <div onclick="newCCFormSort(true)">
            <i class="iconfont icon-xinjian1"></i>新建子级类别
        </div>
        <div class="menu-sep">
        </div>
        <div onclick="EditCCFormSort()">
            <i class="iconfont icon-bianji"></i>编辑
        </div>
        <div onclick="DeleteCCFormSort()">
            <i class="iconfont icon-guanbi"></i>删除
        </div>
        <div class="menu-sep">
        </div>
        <div onclick="moveUpCCFormSort()">
            <i class="iconfont icon-shangyi"></i>上移
        </div>
        <div onclick="moveDownCCFormSort()">
            <i class="iconfont icon-xy"></i>下移
        </div>
        <div class="menu-sep">
        </div>
        <div onclick="RefreshNode('formTree', '1')">
            <i class="iconfont icon-refresh"></i>刷新
        </div>
    </div>
    <div id="mForm" class="easyui-menu" style="width: 120px;">
        <div onclick="Bill_CCForm()">
            <i class="iconfont icon-biaoge-xianshi"></i>表单属性
        </div>
        <div onclick="Bill_Open()">
            <i class="iconfont icon-Search"></i>数据查询
        </div>
        <div class="menu-sep">
        </div>
        <!--  <div onclick="CCForm_Attr()" data-options="iconCls:'icon-property'">
            表单属性</div>-->
        <div onclick="designFoolFrm()">
            <i class="iconfont icon-biaoge"></i>设计傻瓜表单
        </div>
        <div onclick="designFreeFrm()">
            <i class="iconfont icon-biaodandingzhimoban"></i>设计自由表单
        </div>
        <!--<div onclick="CopyFrm()" data-options="iconCls:'icon-copy'">复制表单</div>-->
        <div class="menu-sep">
        </div>
        <div onclick="moveUpCCFormTree()">
            <i class="iconfont icon-shangyi"></i>上移
        </div>
        <div onclick="moveDownCCFormTree()">
            <i class="iconfont icon-xy"></i>下移
        </div>
        <div onclick="deleteCCFormTreeMapData()">
            <i class="iconfont icon-guanbi"></i>删除
        </div>

        <div onclick="CopyFrm()">
            <i class="iconfont icon-anli"></i>复制
        </div>
        <!--<div class="menu-sep"></div>
        <div onclick="RefreshNode('formTree', '1')" data-options="iconCls:'icon-reload'">刷新</div>-->
    </div>
    <div id="mSrcRoot" class="easyui-menu" style="width: 120px;">
        <!--<div onclick="newSrc()" data-options="iconCls:'icon-add'">新建数据源</div>-->
        <div onclick="RefreshNode('formTree', 'SrcRoot')" data-options="iconCls:'icon-reload'">
            刷新
        </div>
    </div>
    <div id="mSrc" class="easyui-menu" style="width: 120px;">
        <div onclick="srcProperty()" data-options="iconCls:'icon-sheet'">
            数据源属性
        </div>
        <!--<div onclick="newSrc()" data-options="iconCls:'icon-add'">新建数据源</div>-->
        <div onclick="newSrcTable()" data-options="iconCls:'icon-new'">
            新建表
        </div>
        <div onclick="alert('删除数据源，待开发')" data-options="iconCls:'icon-delete'">
            删除数据源
        </div>
        <div onclick="RefreshNode('formTree', 'SrcRoot')" data-options="iconCls:'icon-reload'">
            刷新
        </div>
    </div>
    <div id="mSrcTable" class="easyui-menu" style="width: 120px;">
        <div onclick="srcTableProperty()" data-options="iconCls:'icon-sheet'">
            表属性
        </div>
        <div onclick="newSrcTable()" data-options="iconCls:'icon-new'">
            新建表
        </div>
        <div onclick="srcTableData()" data-options="iconCls:'icon-edit'">
            查看&编辑数据
        </div>
        <div onclick="alert('删除表，待开发')" data-options="iconCls:'icon-delete'">
            删除表
        </div>
    </div>
    <div id="mm" class="easyui-menu cs-tab-menu">
        <div id="mm-tabupdate">
            刷新
        </div>
        <div class="menu-sep">
        </div>
        <div id="mm-tabclose">
            关闭
        </div>
        <div id="mm-tabcloseother">
            关闭其他
        </div>
        <div id="mm-tabcloseall">
            关闭全部
        </div>
        <div id="mm-tabcloseright">
            关闭右侧
        </div>
        <div id="mm-tabcloseleft">
            关闭左侧
        </div>
    </div>
    <div id="mDeptRoot" class="easyui-menu" style="width: 120px;">
        <div onclick="newSubDept()" data-options="iconCls:'icon-new'">
            增加下级部门
        </div>
        <div onclick="editDept()" data-options="iconCls:'icon-edit'">
            编辑部门
        </div>
        <div class="menu-sep">
        </div>
        <div onclick="newStation()" data-options="iconCls:'icon-add'">
            增加岗位
        </div>
    </div>
    <div id="mDept" class="easyui-menu" style="width: 120px;">
        <div onclick="newSubDept()" data-options="iconCls:'icon-new'">
            增加下级部门
        </div>
        <div onclick="newDept()" data-options="iconCls:'icon-new'">
            增加同级部门
        </div>
        <div onclick="editDept()" data-options="iconCls:'icon-edit'">
            编辑部门
        </div>
        <div onclick="deleteDept()" data-options="iconCls:'icon-delete'">
            删除部门
        </div>
        <div class="menu-sep">
        </div>
        <div onclick="newStation()" data-options="iconCls:'icon-add'">
            增加岗位
        </div>
    </div>
    <div id="mStation" class="easyui-menu" style="width: 120px;">
        <div onclick="editStation()" data-options="iconCls:'icon-edit'">
            编辑岗位
        </div>
        <div onclick="deleteStation()" data-options="iconCls:'icon-delete'">
            删除岗位
        </div>
        <div class="menu-sep">
        </div>
        <div onclick="newEmp()" data-options="iconCls:'icon-add'">
            增加人员
        </div>
    </div>
    <div id="mEmp" class="easyui-menu" style="width: 120px;">
        <div onclick="editEmp()" data-options="iconCls:'icon-edit'">
            编辑人员
        </div>
        <div onclick="deleteEmp()" data-options="iconCls:'icon-delete'">
            删除人员
        </div>
    </div>
    <script src="../../Scripts/jquery-1.11.0.min.js" type="text/javascript"></script>
    <script src="../../Scripts/easyUI145/jquery.easyui.min.js" type="text/javascript"></script>
    <script src="../../Scripts/EasyUIUtility.js" type="text/javascript"></script>
    <script src="../../Scripts/config.js" type="text/javascript"></script>
    <script src="../../Comm/Gener.js" type="text/javascript"></script>
    <script src="../../Scripts/Cookie.js" type="text/javascript"></script>
    <script src="../../Scripts/QueryString.js" type="text/javascript"></script>
    <script src="../../Style/skin/js/FuncTrees.js" type="text/javascript"></script>
    <script src="../../Style/skin/js/Default.js"></script>
    <script src="../CCFormDesigner/normalize/js/classie.js" type="text/javascript"></script>
    <script src="../CCFormDesigner/normalize/js/modernizr.custom.js" type="text/javascript"></script>
    <script src="../CCFormDesigner/normalize/js/notificationFx.js" type="text/javascript"></script>
    <script>
        //页面启动函数.
        $(function () {
            $("#ShowMsg").hide();
            var webUser = new WebUser();
            if (webUser.No == "") {
                window.location.href = "Login.htm";
                return;
            }

            $("#UserName").append(webUser.Name);
            if (webUser.CCBPMRunModel == 1) {
                var en = new Entity("BP.WF.Port.Admin2.Org", GetQueryString("OrgNo"));
                $("title").text("驰骋BPM设计器—" + "组织编号:" + GetQueryString("OrgNo") + "-名称:" + en.Name);

            }
            else {
                $("#OrgNo").hide();
                $("#OrgName").hide();
                $("#Login2App").show();
                $("#org").hide();
            }

            return;
        });

    </script>

</body>
</html>
