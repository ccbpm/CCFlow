<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>切换用户</title>
    <link href="../../../DataUser/Style/ccbpm.css" rel="stylesheet" type="text/css" />
    <script src="../../Scripts/easyUI145/jquery.min.js" type="text/javascript"></script>
    <script src="../../Scripts/easyUI145/jquery.easyui.min.js" type="text/javascript"></script>
    <script src="../../Scripts/QueryString.js" type="text/javascript"></script>
    <script src="../../Scripts/config.js" type="text/javascript"></script>
    <script src="../../Comm/Gener.js" type="text/javascript"></script>
    <script language="javascript" type="text/javascript">

        //参数.
        var flowNo = GetQueryString("FK_Flow");
        var workID = GetQueryString("WorkID");
        var adminer = GetQueryString("Adminer");
        var adminerSID = GetQueryString("AdminerSID");

        //页面启动函数.
        $(function () {

            // 初始化页面
            var handler = new HttpHandler("BP.WF.HttpHandler.WF_Admin_TestingStep");
            handler.AddPara("WorkID", workID);
            handler.AddPara("Adminer", adminer);
            handler.AddPara("AdminerSID", adminerSID);
            handler.AddPara("FK_Flow", flowNo);

            var data = handler.DoMethodReturnString("DBInfo_Init");
            if (data.indexOf('err@') == 0) {
                alert(data);
                return;
            }

            var data = ToJson(data);
            var gwf = data["WF_GenerWorkFlow"][0]; //流程引擎控制表.
            var gwls = data["WF_GenerWorkerList"]; //流程引擎控制表.
            var track = data["Track"]; //日志表..

            //首先输出流程引擎控制表。
            var html = "<table>";
            html += "<caption>流程引擎控制表</caption>";
            html += "<tr>";
            for (var i = 0; i < gwf.length; i++) {
                html += "<th>" + i + "</th>";
            }
            html += "</tr>";

            //输出数据, 根据列名
            html += "<tr>";
            for (var i = 0; i < gwf.length; i++) {
                html += "<th>" + i + "</th>";
            }
            html += "</tr>";

            $("#GenerWorkFlow").html(html);


            //输出工作人员列表.
            var html = "<table>";
            html += "<caption>工作人员列表</caption>";
            html += "<tr>";


            $("#GenerWorkerList").html(html);


            //绑定数据.
            $("#list").html(html);

        });


    </script>
</head>
<body>

    <h2>数据库信息 </h2>

    <fieldset>
        <legend>流程引擎控制表</legend>
        <div id="GenerWorkFlow"></div>
    </fieldset>

    <fieldset>
        <legend> 工作人员列表</legend>
        <div id="GenerWorkerList"></div>
    </fieldset>

    <fieldset>
        <legend> 日志表</legend>
        <div id="Track"></div>
    </fieldset>


    <fieldset>
        <legend> 流程数据表</legend>
        <div id="NDxxRpt"></div>
    </fieldset>


</body>
</html>