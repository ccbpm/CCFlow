<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>方法内容编辑</title>
    <link href="../../../DataUser/Style/ccbpm.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript" src="../../Scripts/bootstrap/js/jquery.min.js"></script>
    <script src="../../Scripts/QueryString.js" type="text/javascript"></script>
    <script type="text/javascript" src="../../Scripts/config.js"></script>
    <script type="text/javascript" src="../../Comm/Gener.js"></script>
    <script src="../../Scripts/PinYin.js" type="text/javascript"> </script>
    <base target="_self" />
    <script type="text/javascript">
        function Esc() {
            if (event.keyCode == 27)
                window.close();
            return true;
        }
    </script>
    <script type="text/javascript" language="javascript">
        //页面启动函数.
        $(function () {

            var myPK = GetQueryString("MyPK");
            var en = new Entity("BP.WF.CCBill.FrmMethod", myPK);
            $("#MType").val(en.MethodDocTypeOfFunc); //设置执行内容类型.
            $("#tb_doc").val(en.MethodDoc); //设置执行内容.

        });

        function DemoSQL() {
            var url = "MethodDocDemoSQL.htm?MyPK=" + GetQueryString("MyPK");
            WinOpen(url);
        }
        function DemoJS() {
            var url = "MethodDocDemoJS.htm?MyPK=" + GetQueryString("MyPK");
            WinOpen(url);
        }
        function Save() {

            var myPK = GetQueryString("MyPK");
            var en = new Entity("BP.WF.CCBill.FrmMethod", myPK);

           en.MethodDocTypeOfFunc =  $("#MType").val(); //设置执行内容类型.
           en.MethodDoc = $("#tb_doc").val(); //设置执行内容.
           en.Update();

        }
    </script>
</head>
<body onkeypress="Esc();" style="font-size: smaller">
    <table id="Table1" style="width: 100%">
        <caption> 方法执行内容编辑器 </caption>
        <tr>
        <th> 方法类型: <label ><input type="radio" value="0"  name="MType" >SQL </label>
        
          <label ><input type="radio" value="1"  name="MType" >javascript </label>  
          <label ><input type="radio" value="2"  name="MType"  >URL模式 </label>  
          <input type="button"  value="保存" onclick="Save()" id="Btn_Save" name="Btn_Save" />
          <input type="button"  value="内容编辑Demo for Javascript" onclick="DemoJS()" id="Button1" name="Btn_D1" />
          <input type="button"  value="内容编辑Demo for SQL" onclick="DemoSQL()" id="Button2" name="Btn_D2" />

          </th>
        </tr>
    </table>

    <textarea id="tb_doc" style=" width:100%; height:100%;"   rows="90" >
    
    </textarea>


   
</body>
</html>
