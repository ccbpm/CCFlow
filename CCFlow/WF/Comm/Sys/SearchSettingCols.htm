<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>显示列设置</title>
    <script type="text/javascript" src="../../Scripts/bootstrap/js/jquery.min.js"></script>
    <script src="../../Scripts/QueryString2016.js" type="text/javascript"></script>
    <script type="text/javascript" src="../../Scripts/config.js"  ></script>
    <script src="../../Comm/Gener.js?va2=2" type="text/javascript"></script>
    <link href="../../../DataUser/Style/ccbpm.css" rel="Stylesheet" />
    <script type="text/javascript">

        //页面启动函数.
        $(function () {

            var ensName = GetQueryString("EnsName");

            //全局配置.
            var en = new Entity("BP.Sys.EnCfg");
            en.No = ensName;
            if (en.IsExits() == false) {

                en.SetPara("UIRowStyleGlo", 1); //表格数据行风格(应用全局)
                en.SetPara("IsEnableDouclickGlo", 1); //是否启动双击打开(应用全局)
                en.SetPara("IsEnableFocusField", 0); //是否启用焦点字段
                en.SetPara("FocusField", "无"); //焦点字段(用于显示点击打开的列
                en.SetPara("IsEnableRefFunc", 1); //是否启用相关功能列

                en.SetPara("IsEnableOpenICON", 1); //是否启用打开图标
                en.SetPara("MoveToShowWay", 0); //移动到显示方式
                en.SetPara("MoveTo", "无"); //是否启用相关功能列
                en.SetPara("WinCardW", "900"); //是否启用相关功能列
                en.SetPara("WinCardH", "600"); //是否启用相关功能列

                en.SetPara("EditerType", 0); //是否启用相关功能列
                en.SetPara("WinOpenUrl", ""); //是否启用相关功能列
                en.Insert();

            }

            var en = new Entity("BP.Sys.EnCfg");
            en.No = ensName;
            en.Retrieve();


            //赋值.
            GenerBindEnumKey("DDLPara_UIRowStyleGlo", "UIRowStyleGlo");
            GenerBindEnumKey("DDLPara_MoveToShowWay", "MoveToShowWay");
            GenerBindEnumKey("DDLPara_EditerType", "EditerType");

            //给页面的控件赋值.
            GenerFullAllCtrlsVal(en);

           // alert(en);

        });

        function Save() {

            var ensName = GetQueryString("EnsName");
            //全局配置.
            var en = new Entity("BP.Sys.EnCfg", ensName);
            en.CopyForm(); //从from里面copy数据.
            en.No = ensName;
            en.Update();

            window.location.href = window.location.href;
        }

        function Back() {
            var url = "SearchSetting.htm?EnsName=" + GetQueryString("EnsName");
            window.location.href = url;
        }

    </script>
</head>
<body>
<table style="width:96%;">
<tr>
<th >配置项</th>
<th>内容</th>
<th>信息</th>
</tr>
 
</table>

<input type="button" value="保存"  onclick="Save()" />
<input type="button" value="返回基本设置"  onclick="Back()" />


</body>
</html>
