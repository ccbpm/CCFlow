<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>授权详细信息</title>
    <meta http-equiv="Access-Control-Allow-Origin" content="*" />
    <link href="../Scripts/bootstrap/css/bootstrap.css" rel="stylesheet" />
    <link href="../Scripts/bootstrap/css/components-rounded.css" rel="stylesheet" />
    <link href="../Scripts/bootstrap/css/font-awesome.css" rel="stylesheet" />
    <link href="../Scripts/bootstrap/css/themes/default/style.min.css" rel="stylesheet" />
    <script type="text/javascript" src="../Scripts/QueryString.js"></script>
    <script type="text/javascript" src="../Scripts/QueryString2016.js"></script>
    <script type="text/javascript" src="../Scripts/bootstrap/js/jquery.min.js"></script>
    <script type="text/javascript" src="../Scripts/bootstrap/js/jquery.cokie.min.js"></script>
    <script type="text/javascript" src="../Scripts/bootstrap/js/bootstrap.min.js"></script>
    <link href="../../DataUser/Style/ccbpm.css" rel="stylesheet" type="text/css" />
    <!--时间-->
    <script src="../Comm/JS/Calendar/WdatePicker.js" type="text/javascript"></script>
    <link href="../Comm/JS/Calendar/skin/WdatePicker.css" rel="stylesheet" type="text/css" />
    <!-- 导入配置文件. -->
    <script type="text/javascript" src="../Scripts/config.js"></script>
    <script type="text/javascript" src="../Comm/Gener.js"></script>
    <script type="text/javascript" language="javascript">
        //页面启动函数.
        var webUser = null;
        var emp = null;

        $(function () {

            webUser = new WebUser();

            var ens = new Entities("BP.WF.Auths");
            ens.Retrieve("Auther", webUser.No);


            var html = "<table style='width:80%;'>";
            html += "<caption> [" + webUser.No + "]授权列表  <a href='AuthorDtl.htm' >+增加授权列表</a> </caption>";
            html += "<tr>";
            html += "<th>序</th>";
            html += "<th>授权类型</th>";
            html += "<th>授权给</th>";
            html += "<th>流程</th>";
            html += "<th>收回日期</th>";
            html += "<th>状态</th>";
            html += "<th>操作</th>";
            html += "</tr>";

            for (var i = 0; i < ens.length; i++) {

                en = ens[i];
                html += "<tr>";
                html += "<td>(" + i + 1 + ")</td>";
                html += "<td>" + en.AuthType + "</td>";
                html += "<td>" + en.EmpNo + "</td>";
                html += "<td>" + en.FlowNo + "</td>";
                html += "<td>" + en.TakeBackDT + "</td>";
                html += "<td>" + en.TakeBackDT + "</td>";
                html += "<td><a href=\"javascript:Del('" + en.MyPK + "')\">删除</a></td>";
                html += "</tr>";
            }

            html += "</table>";

            $("#docs").html(html);
        });


        //执行删除.
        function Delete() {

            var handler = new HttpHandler("BP.WF.HttpHandler.WF_Setting");
            handler.AddPara("Author", $("#TB_Author").val());
            handler.AddPara("AuthorDate", $("#TB_DT").val());
            handler.AddPara("AuthorWay", $("#DDL_AuthorWay").val());
            var data = handler.DoMethodReturnString("Author_Save");

            alert(data);

            window.location.href = 'Default.htm';

        }

/**/</script>
</head>
<body onkeypress="Esc()" class="gray-bg">
    <form id="cc" name="cc">
        <div id="docs"></div>

    </form>
</body>
</html>
